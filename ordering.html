<!doctype html>
<html lang="en">
  <head>
    <title>Title</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
  </head>
  <body>
      <div class="wrapper">
        <div class="main-content my-5">
            <div class="container">
                <form action="#" id="priceForm">
                    <div class="detail-content">
                        <div class="row mx-auto w-100">
                            <div class="col-lg-12 col-12 my-4">
                                <h2 class="heading">Enter Your Detail</h2>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 col-12 mb-2">
                                <div class="form-group">
                                    <label for="#">Name</label>
                                    <input type="text" name="name" id="name" class="form-control" required>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 col-12 mb-2">
                                <div class="form-group">
                                    <label for="#">Email</label>
                                    <input type="email" name="email" id="email" class="form-control" required>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 col-12 mb-2">
                                <div class="form-group">
                                    <label for="#">Confirm Email</label>
                                    <input type="text" name="confirmEmail" id="confirmEmail" class="form-control" required>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 col-12 mb-2">
                                <div class="form-group">
                                    <label for="#">Address</label>
                                    <input type="text" name="address" id="adress" class="form-control" required>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 col-12 mb-2">
                                <div class="form-group">
                                    <label for="#">Postal code</label>
                                    <input type="text" name="pcode" id="pcode" class="form-control" required>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 col-12 mb-2">
                                <div class="form-group">
                                    <label for="#">Contact Number</label>
                                    <input type="text" name="contactNumber" id="contactNumber" class="form-control" required>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="topping-content">
                        <div class="row mx-auto w-100">
                            <div class="col-lg-12 col-12 my-4">
                                <h2 class="heading">Pick your Toppings</h2>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-6 col-12 mb-2">
                                <div class="form-group">
                                    <div class="topping" data-price="0.69" data-title="Anchovy">
                                        <div class="icon"><img src="assets/images/anchovy.svg" class=""></div>
                                        <div class="title">Anchovy</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-6 col-12 mb-2">
                                <div class="form-group">
                                    <div class="topping" data-price="0.69" data-title="Bacon">
                                        <div class="icon"><img src="assets/images/bacon.svg" class=""></div>
                                        <div class="title">Bacon</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-6 col-12 mb-2">
                                <div class="form-group">
                                    <div class="topping" data-price="0.69" data-title="Basil">
                                        <div class="icon"><img src="assets/images/basil.svg" class=""></div>
                                        <div class="title">Basil</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-6 col-12 mb-2">
                                <div class="form-group">
                                    <div class="topping" data-price="0.69" data-title="Chili">
                                        <div class="icon"><img src="assets/images/chili.svg" class=""></div>
                                        <div class="title">Chili</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-6 col-12 mb-2">
                                <div class="form-group">
                                    <div class="topping" data-price="0.69" data-title="Mozzarella">
                                        <div class="icon"><img src="assets/images/mozzarella.svg" class=""></div>
                                        <div class="title">Mozzarella</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-6 col-12 mb-2">
                                <div class="form-group">
                                    <div class="topping" data-price="0.69" data-title="Mushroom">
                                        <div class="icon"><img src="assets/images/mushroom.svg" class=""></div>
                                        <div class="title">Mushroom</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-6 col-12 mb-2">
                                <div class="form-group">
                                    <div class="topping" data-price="0.69" data-title="Olive">
                                        <div class="icon"><img src="assets/images/olive.svg" class=""></div>
                                        <div class="title">Olive</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-6 col-12 mb-2">
                                <div class="form-group">
                                    <div class="topping" data-price="0.69" data-title="Onion">
                                        <div class="icon"><img src="assets/images/onion.svg" class=""></div>
                                        <div class="title">Onion</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-6 col-12 mb-2">
                                <div class="form-group">
                                    <div class="topping" data-price="0.69" data-title="Pepper">
                                        <div class="icon"><img src="assets/images/pepper.svg" class=""></div>
                                        <div class="title">Pepper</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-6 col-12 mb-2">
                                <div class="form-group">
                                    <div class="topping" data-price="0.69" data-title="Pepperoni">
                                        <div class="icon"><img src="assets/images/pepperoni.svg" class=""></div>
                                        <div class="title">Pepperoni</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-6 col-12 mb-2">
                                <div class="form-group">
                                    <div class="topping" data-price="0.69" data-title="Prawn">
                                        <div class="icon"><img src="assets/images/prawn.svg" class=""></div>
                                        <div class="title">Prawn</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-6 col-12 mb-2">
                                <div class="form-group">
                                    <div class="topping" data-price="0.69" data-title="Sweetcorn">
                                        <div class="icon"><img src="assets/images/sweetcorn.svg" class=""></div>
                                        <div class="title">Sweetcorn</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="order-content">
                        <div class="row mx-auto w-100">
                            <div class="col-lg-12 col-12 my-4">
                                <h2 class="heading">Order Summary</h2>
                            </div>
                            <div class="col-lg-12 col-12">
                                <div class="prices-content">
                                    <div class="detail">
                                        <div>Pizza $<span class="price">9.99</span></div>
                                        <!-- <div class="flex">
                                            <div>
                                                <span class="btn btn-count btn-plus-one">+</span>
                                                <span class="count"> 1 </span>
                                                <span class="btn btn-count btn-minus-one">-</span>
                                                <span class="topp-title">Bacon</span>
                                            </div>
                                            <div>$<span class="price" unit-price="0.69">0.69</span></div>
                                        </div> -->
                                    </div>
                                    <hr class="mb-1">
                                    <div class="text-right mb-5">
                                        Total: $<span class="totalPrice">9.99</span>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-12 col-12">
                                <div class="submit-button text-right">
                                    <button type="submit" class="btn btn-submit">Place Order</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>

            </div>
        </div>
      </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <script>
        // topping Click

        $(".topping-content .topping").click(function(){
            $(this).toggleClass("active");
            let dataPrice = $(this).attr("data-price");
            let dataTitle = $(this).attr("data-title");
            let appendDiv = $($(".prices-content .detail")[0]);
            if ($(this).hasClass("active")) {
                let appendHtml =  "<div class='flex' data-title='"+dataTitle+"'><div><span class='btn btn-count btn-plus-one'>+</span><span class='count'> 1 </span><span class='btn btn-count btn-minus-one'>-</span><span class='topp-title'>"+dataTitle+"</span></div><div>$<span class='price' unit-price='"+dataPrice+"'>"+dataPrice+"</span></div></div>";               
                $(appendDiv).append(appendHtml);
            }else{
                $(".prices-content .detail .flex").each(function(){
                    if ($(this).attr("data-title") == dataTitle) {
                        $(this).remove();
                    }
                })
            }
            totalChange();
        })

        // count Change
        
        $(".prices-content").on('click','.btn-count',function(){
            let parentDiv = $($(this).parent().parent())[0];
            let count = parseInt($($(parentDiv).find(".count")[0]).text());
            let price = parseFloat($($(parentDiv).find(".price")[0]).attr('unit-price'));
            let toppTitle = $($(parentDiv).find(".topp-title")[0]).text();
            if ($(this).hasClass("btn-plus-one")) {
                count++;
                console.log("add clicked");
            }else{
                count--;
                console.log("Minus by 1");
            }
            if (count != 0) {
                let newPrice = count * price;
                $($(parentDiv).find(".price")[0]).text(newPrice);
                $($(parentDiv).find(".count")[0]).text(count);
            }else{
                $(parentDiv).remove();
                $(".topping-content .topping").each(function(){
                    if ($(this).attr("data-title") == toppTitle) {
                        $(this).removeClass("active");
                    }
                })
            }
            totalChange();
        })

        //  total Change

        function totalChange(){
            var totalPrice = 0.0;
            $(".prices-content .price").each(function(){
                let price = parseFloat($(this).text());
                totalPrice += price;
            })
            $(".prices-content .totalPrice").text(totalPrice.toFixed(2));
        }
        totalChange();

        // form-submiting
        
        $("#priceForm").submit(function(e){
            e.preventDefault();
            alert("Order Successfully created");
            $("#priceForm input").each(function(){
                let name = $(this).attr("name");
                let value = $(this).val();
                console.log(name + ": " + value);
            })
        })
    </script>
  </body>
</html>